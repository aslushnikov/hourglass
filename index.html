<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
<body class=hourglass>
  <span class=minutes>0</span>:<span class=seconds>00</span>
</body>
<style>
.hourglass {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 120px;
}

.danger {
  color: red;
}
</style>

<script>
  const $ = document.querySelector.bind(document);

  const totaltime = 180;
  let timeleft = totaltime; // seconds!

  render();

  let tick = setTimeout(doTick, 1000);

  function doTick() {
    clearTimeout(tick);
    tick = 0;
    --timeleft;
    render();
    if (timeleft)
      tick = setTimeout(doTick, 1000);
  }

  $('body').addEventListener('click', () => {
    if (timeleft) {
      timeleft = totaltime - timeleft;
      render();
      return;
    }
    // Resetting time.
    timeleft = totaltime;
    render();
    clearTimeout(tick);
    tick = setTimeout(doTick, 1000);
  });

  function render() {
    $('body').classList.toggle('danger', timeleft < 10);
    const minutes = (timeleft / 60) | 0;
    const seconds = timeleft % 60;
    const sec1 = (seconds / 10) | 0;
    const sec2 = seconds % 10;
    $('.minutes').textContent = minutes;
    $('.seconds').textContent = sec1 + '' + sec2;
  }
</script>

